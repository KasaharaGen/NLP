Q: Is it possible to reduce the disk space required to install Mac OS X 10.6? I was hoping to install Mac OS X on a flash-based drive I have, but it's only 4GB. The installer tells me there's not enough free space, but it doesn't specify how much I need free.


*

*Does anyone know the exact minimum?

*Is it possible to create a custom install with only the bare basics and install within 4GB?


A: The minimum install that comes off the DVD is ~6 gigabytes. If you want to make a smaller install, the easiest thing to do is install it on another partition, trim down the installation, then copy it over to the target drive using ditto or Carbon Copy Cloner.
Though I do not recommend doing any of these, there are a couple of thing installed in the default system that can be trimmed out to save space:


*

*All app binaries are installed 2 way fat (32 bit Intel, 64 bit Intel), and you can conceivably remove 32 bit Intel. The only Intel Macs shipped that do not support 64 bit userspace are the original MacBook Pro, Mac Mini, and MacBook 2006. You can use a program like Xslimmer to do this.

*All frameworks are installed 3 way fat (32 bit and 64 bit Intel, and 32 bit PPC). The PPC bits are there for Rosetta even if you do not have the emulator installled. You can remove PPC if you are not going to use any appc apps. Again, Xslimmer does this.

*All Mac OS X installs include the complete set of drivers necessary for all Macs supported by that OS at the time it shipped. A number of drives may not be necessary for your particular Machine, and could be trimmed out, but doing so is moderately complicated.

*If you have multiple localization installed you can remove them. Xslimmer can do this, as can Monolingual.

*If yo are really gutsy you can build an mkext and delete OS X's drivers directory entirely. An mkext is a bundle of kexts generally used as part of netbooting, but the bootloader can use it to boot off a normal disk as well. It will omit any driver not needed to boot a system, and be trimmed down to a single architecture. On my system that would save ~300MB. If the full drivers aren't there, then some devices might not work, but anything needed to boot should be.

*You can start deleting programs in /Applications, but the system assumes those are there, some stuff may not work properly.

*Disk Utility by default leaves extra space for certain things on drives larger than a certain size. It is documented here. On a 4GB drive there there is ~328 MBs lost that way.
200MB of it is for the ESP partition. The ESP is scratch space used under rare circumstances for the boot process. Removing it might cause difficulties installing firmware updates, but it probably won't, and you probably won't notice it.
There is also 128MB of unformatted space after the HFS+ partition. That is that there to aid in LVM operations (resizing partitions), and may be necessary in certain edge cases when running the installer (if the installer needs a chunk of contiguous space for something that is not a normal file during an OS upgrade, and it can't find the space within the FS it can extend it). You can probably get rid of it, but it might make it difficult to run the installer directly against the drive. Of course, given what you have to do to get 10.6 onto the drive, the odds that you could just run a 10.7 updater against when that comes out seem very low anyway.
In order to layout the drive this way you will need to hand build the partition map with the commandline gpt tool.
Having said that, the above will probably not trim down OS X enough to fit into a 4GB flash drive. Even if it did, OS X needs some temporary space (a couple hundred megs) to work, and by default that is on the boot drive. While it is conceivable you could write a boot script to find a drive inside the system and use it for temp space (point /private/tmp there, and setting the up the default pager), that is moderately complicated. I am guessing this is a recovery drive for a lab or something, in which case you don't want this install to perturb drives in the system it boots. If you need to boot on a range of machines it also means trimming out drivers is substantially more complicated and limited.
Ultimately, you are much better off just buying a 8GB flash drive. That is large enough to clone a normal installation, and will save you days of work.

A: I don't know what the absolute minimum is. Isn't it written on the DVD box?
However, there are obviously stuff that you can remove from the install to regain several hundred megabytes. I'm not sure you can fit Snow Leopard in 4 GB, though. 8 GB should be feasible.


*

*Additional languages and application architectures are not necessary and are pretty huge (string them using Monolingual or something like that);

*The iLife apps (GarageBand, iPhoto, iMovie & iMovie HD, iDVD) and iTunes score more than 1 GB together;


There are probably many more you can strip off. My call would be to make another partition on your primary drive (maybe 15-20 GB), install Mac OS there and try to remove stuff until it gets under 4 GB. Then, copy it to your drive with Carbon Copy Cloner and it should be bootable.

A: Another factor no one thinks about is how much RAM you have in your computer, because if you have 2GB RAM, a bootable USB drive with Mac OS X is going to create a 2GB virtual memory swap file on the drive. It will be stored in
/private/var/vm/sleepimage

You can delete this file but the next time your reboot, it will be re-created. 
If you run the same USB drive on a computer with 8GB of RAM, its' going to try to create an 8GB swap file. So your 4GB installation could balloon to 12GB of disk space the first time you use it.
There is a method out there somewhere to permanently disable the sleepimage file. This means that whenever you boot from the USB drive, it will only use RAM and will not cache the contents of ram to the sleepimage file. This might have an adverse effect on system performance, but you will be able to run your system on a smaller USB drive.

A: I just scanned /Library and /System and /usr with GrandPerspective to find big files. Here is my findings:
662 Mb /Library/Printers
 52 Mb /Library/Fonts/STHeiti Medium.ttc
 58 Mb /Library/Dictionaries/Shogakukan Progressive English-Japanese...
382 Mb /System/Library/Speech/Voices/Alex.SpeechVoice
 52 Mb /System/Library/Fonts/STHeiti Light.ttc
 34 Mb /System/Library/Fonts/Aqua Kana.ttc

In total 1.2 Gb. I guess these files can be safely deleted if it's for an USB stick.

A: When installing Mac OS 10.6 "Snow Leopard" you can click "Customize" and remove Printer Support, Additional Fonts, Language Translations, Rosetta, X11 and Quicktime. That eliminates 3+ GB and leaves 'Essential System Software' which requires 8.01 GB. 
If you want to get it on a smaller drive you won't be able to use the Install CD. You'll have to delete even more and then make an exact copy. 
