Q: How to coerce Lion Time Machine into offering backup history migration? This article describes a feature I heard about from multiple sources about an automagic backup migration process that Lion will do for you. Essentially, when migrating to a new machine, you can maintain your backup history and use the same backup drive on your new machine.
I recently had to do a double migration (both a new machine and a larger backup hard drive), so maybe that's why this didn't go as smoothly as I hoped. I used the old backup drive to restore with migration assistant on first boot, then used Disk Utility to clone my old backup drive to my new one.
However, Lion would not present the "Use Previous Disk"/"Inherit Backup History" dialogs seen in the link above and below.


Instead, I was only presented with the prompt to use my new drive as a backup disk. I noted that it was creating a new entry in Backups.backupdb, since the computer name had changed, so I attempted to hack this by going into System Preferences/Sharing and renaming the new computer exactly the same as the previous one. (for some reason, the pre-Lion system had been named First Last’s Computer and the new system was named First's Computer Note the difference between ’ and '!)
Anyway, this is now backing up to the correct backupdb, but I don't believe it's hard linking properly as it would if "Inherit Backup History" had been executed; it's copying the whole drive's worth of data over instead. I suppose this means I will have the history at least, but it's not as seamless as it should be. (It hardly matters for the record; It was only about 60G worth of data now on a 1T drive.)
It also now occurs that the "right way" to do this would have been to clone my backup to my new backup drive BEFORE upgrading the computer and restoring from the backup.
Anyway, the answer to this question will dig into the nitty-gritty of how time machine keeps track of itself and explain how to force the daemon to present the dialog boxes above.

A: You can't get that dialog back, but you can inherit the backup manually via Terminal using the tmutil command. Do man tmutil for more information.
Example:
$ sudo tmutil inheritbackup "/Volumes/Time Machine/Backups.backupdb/iMac"

For more information, see the blue box here: http://Pondini.org/TM/B6.html and you would do well to read the whole page before starting the process.
