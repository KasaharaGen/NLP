Q: Why can't my jailbroken iPhone connect to a wifi network? I have an iPhone 3G 16GB with iOS 4.0.2 and my wifi is not working, I tried to fix it with reset network settings and other quick fixes like that but it still doesn't work. Sometimes it sees wifi networks but I can't connect. I don't think is a hardware problem because I can see the wifi MAC address on the device.
Version: 4.0.2 (8A400) (jailbreak with redsnow)
Modem Firmware: 05.13.04
PS: On 3.1.2 the same thing. (jailbreak with blackrain)
Downgraded at 3.1.2, again...still nothing (jailbreak with redsnow)

A: It may still be a hardware issue -- I had a similar problem last year. But since you say that your phone sometimes does see a wifi network, there's hope that the hardware is okay.
First, follow the comments posted here to make sure you're running a completely normal OS without any hacks or modifications.  
Then, here's Apple's description of how to reset the network settings.
Lastly, if it still won't work, check my link above.

A: It seems that many users of 3G experienced the same problem with WIFI when uphgraded to iOS 4
Perhaps some of the solutions listed here would help. In you case you are probably left with the the last option

Restore, but not from a backup. One less-than-ideal fix for this issue
  involves restoring the iPhone as a new
  device rather than from a backup. It
  appears that bad holdover data from
  iPhone backups can cause loss of data
  access. Restoring as a new phone will
  delete contacts and other data, but
  generally resolves this problem.
To do so, connect your iPhone or iPod
  touch to your computer, click
  “Restore” in iTunes, then choose
  “setup as new phone.”


A: Try a stock (un-jailbroken) ipsw file from scratch. Use this procedure to downgrade properly.
I think that when you restore using your jailbroken image, you're just putting the problem back onto to the device. I've noticed that even after a brick, when I restore with redsn0w, it's not a clean install, as my previous applications and settings are still there. I think a fresh install of stock firmware may help. Jailbreak it only after you find out if original firmware works. 

A: What worked for me is going to settings / General / reset / reset all settings
Good luck, mine jumped back to what it was like about a month ago then it worked fine from there!
