Q: iPad won't accept WiFi captive portal logon I am building a captive portal for a university network.  It works quite well on all devices I have tested with, but I am having some iPad troubles.  Let me explain my steps:


*

*I go to Settings, WiFi

*Select my test network

*Immediately upon connecting to the WiFi, Safari slides up from the bottom (sans URL box, with "Log In" at top) with my captive portal page.

*I login to my captive portal page

*I am redirected to Apple.com, which loads fine


The iPad is now allowed to use the internet, and all is well.  The problem is, the iPad doesn't see it that way.
The "Log In" form of Safari never slides back down out of the way, as I would expect.  If I press Home open up Safari, and try to open a page, I am immediately given the error:

Cannot Open Page
Safari cannot open the page because it is not connected to the Internet.

There are no connectivity issues at all, and the iPad indeed can connect to the Internet.  It just believes that it can't.
A few things that the problem isn't:


*

*DHCP/DNS/IP Addressing issues... I assure you it has a valid IP address as assigned from DHCP, and the correct DNS addresses, and gateway.

*WiFi Connectivity... Signal is strong, I am sitting 5 ft. away from the AP, and I can continuously ping the iPad with no packet loss or high latency.

*"Turn it off/on again", or "Forget the network and rejoin it" are not solutions, and do not solve the problem

*A problem with my captive portal...  The captive portal itself is fine, and there are no problems with it.  Again, the iPad can load apple.com from its own "Login Safari" just fine.


I believe the problem is that Apple has written some code, trying to be "intelligent" that detects when my captive portal page logon is complete, so it can save any form data for posting to the server later for automatic logon.
My question is...
What cue is Apple looking for to know when captive portal logon is complete?

For what its worth, I stumbled across a forum thread discussing the captive portal detection.  I'd rather not outright disable it... I just need to find a way to make it work.

A: alright I may have some light to shed on this:
I just got off the phone with an Apple Engineer and he said a few things to me that make sense.
He has stated that the "crippled browser" should never be displaying any other page than
our captive portal page. He stated that if after logging into captive portal I am redirected
to www.apple.com/library/test/success.html the iPad's "crippled browser" will close.
If I see another page (like I saw apple.com and not http://www.apple.com/library/test/success.html which would have closed the browser.) it is likely that the system hosting captive portal is not directing me to the exact original page requested. Which was http://www.apple.com/library/test/success.html 
It could in fact be truncating or altering the original URL, which is possibly why I see apple.com's main page in the "crippled browser"
No resolution yet, as I still need to confrim that the wireless controller is indeed doing this, but it makes sense, and might help.
